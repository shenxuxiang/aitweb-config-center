{"version":3,"file":"static/js/757.9afbd081.chunk.js","mappings":"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","sources":["webpack://aitweb-config-center/./src/components/Pagination/index.module.less?30d3","webpack://aitweb-config-center/./src/components/Pagination/index.tsx","webpack://aitweb-config-center/./src/pages/manage/record/index.module.less?99e3","webpack://aitweb-config-center/./src/pages/manage/record/index.tsx","webpack://aitweb-config-center/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://aitweb-config-center/./node_modules/core-js/modules/es.array.unshift.js","webpack://aitweb-config-center/./node_modules/core-js/modules/es.promise.finally.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"ait_pagination\":\"src-components-Pagination-index-module-ait_pagination-W62Ro\",\"ait_pagination_item\":\"src-components-Pagination-index-module-ait_pagination_item-Qgrzf\",\"active\":\"src-components-Pagination-index-module-active-sp_yz\",\"dot\":\"src-components-Pagination-index-module-dot-rQem_\",\"next\":\"src-components-Pagination-index-module-next-cFjOs\",\"disabled\":\"src-components-Pagination-index-module-disabled-TlMxq\",\"prev\":\"src-components-Pagination-index-module-prev-YCRqV\",\"ait_pagination_item_jump\":\"src-components-Pagination-index-module-ait_pagination_item_jump-SKGWz\",\"ait_pagination_item_jump_input\":\"src-components-Pagination-index-module-ait_pagination_item_jump_input-SeGBd\"};","import React, { memo, useLayoutEffect, useRef, useState } from 'react';\r\nimport classnames from 'classnames';\r\nimport Icon from '@/components/Icon';\r\nimport Input from '@/components/Input';\r\nimport styles from './index.module.less';\r\n\r\n/**\r\n * 分页器的计算有一定的复杂度。看看我们的原理分析：\r\n * 1: 如果页数小于等于 7，则全部展示。这是根据分页器的结构计算出来的：\r\n * 结构一: min, •••, middle - 2, middle - 1, middle, middle + 1, middle + 2, •••, max\r\n * 例如: 1, ..., 3, 4, 5, 6, 7, ..., 9\r\n * 结构二: min, middle - 2, middle - 1, middle, middle + 1, middle + 2, max,\r\n * 例如：1, 2, 3, 4, 5, 6, 7\r\n * 2: 如果页数大于等于 8，则进行如下计算：\r\n * 2-1: 如果 pageNum 为前 3 位，则展示为 1, 2, 3, 4, 5, •••, maxPage\r\n * 2-2: 如果 pageNum 为后 3 位，则展示为 1, •••, maxPage - 4, maxPage - 3, maxPage - 2, maxPage - 1, maxPage\r\n * 2-3: 如果 pageNum 为中间位，则以 pageNum 为界，将分页器分成左边和右边，然后分别进行计算；\r\n * 这里计算有一个规律，左边需要依次计算四个位置，右边同样也需要依次计算四个位置；\r\n * 所以左边的值计算必须始终要大于等于 1，右边的值计算始终要小于等于 pageMax。对于不满足这个条件的不展示。\r\n * 2-4: 与 pageNum 相邻的左边第一、第二的位置上必须展示数字，同样与 pageNum 相邻的右边第一、第二的位置上必须展示数字；\r\n * 与 pageNum 相邻的左右两边的第三个位置展示，可能是 ••• 也可能是 1/maxPage，这要看具体计算的值；\r\n * 左边: if pageNum - 3 > 1 则展示 ••• 否则展示 1\r\n * 右边: if pageNum + 3 < maxPage 则展示 ••• 否则展示 maxPage\r\n * 2-5: 第四个位置上一定展示的是 1/maxPage。\r\n */\r\n\r\ninterface IPaginationItem {\r\n  isActive: boolean;\r\n  counter: string | number;\r\n}\r\ninterface IProps {\r\n  pageSize: number;\r\n  pageNum: number;\r\n  total: number;\r\n  onChange: (value: number) => void;\r\n  disabled?: boolean;\r\n  className?: string;\r\n  jump?: boolean;\r\n}\r\n\r\nfunction Pagination(props: IProps) {\r\n  const { pageSize, pageNum, total, onChange, disabled, className = '', jump } = props;\r\n  const [state, setState] = useState<IPaginationItem[]>([]);\r\n  // 计算最大页数\r\n  const maxPageRef = useRef(Math.ceil(total / pageSize));\r\n\r\n  useLayoutEffect(() => {\r\n    // 每当 pageSize、pageNum、total 变化时重新计算。\r\n    const maxPage = Math.ceil(total / pageSize);\r\n    maxPageRef.current = maxPage;\r\n    const stack: IPaginationItem[] = [];\r\n    if (maxPage <= 7) {\r\n      for (let i = 1; i <= maxPage; i++) {\r\n        stack.push({ isActive: i === pageNum, counter: i });\r\n      }\r\n    } else if (pageNum <= 3) {\r\n      // 展示内容形式: 1, 2, 3, 4, 5, •••, maxPage\r\n      for (let i = 1; i <= 7; i++) {\r\n        if (i <= 5) {\r\n          stack.push({ counter: i, isActive: i === pageNum });\r\n        } else if (i === 6) {\r\n          stack.push({ counter: 'forward', isActive: false });\r\n        } else {\r\n          stack.push({ counter: maxPage, isActive: false });\r\n        }\r\n      }\r\n    } else if (pageNum + 3 > maxPage) {\r\n      // 展示内容形式: 1, •••, maxPage - 4, maxPage - 3, maxPage - 2, maxPage - 1, maxPage\r\n      for (let i = 6; i >= 0; i--) {\r\n        if (i === 6) {\r\n          stack.push({ counter: 1, isActive: false });\r\n        } else if (i === 5) {\r\n          stack.push({ counter: 'back', isActive: false });\r\n        } else {\r\n          stack.push({ counter: maxPage - i, isActive: maxPage - i === pageNum });\r\n        }\r\n      }\r\n    } else {\r\n      stack.push({ counter: pageNum, isActive: true });\r\n      for (let i = 1; i <= 4; i++) {\r\n        // 计算 pageNum 左边\r\n        // 当 pageNum - i 必须大于 0，才会展示出来。否则不展示。\r\n        if (pageNum - i > 0) {\r\n          // pageNum 左边前两位必须展示为数字。\r\n          if (i <= 2) {\r\n            stack.unshift({ counter: pageNum - i, isActive: false });\r\n          } else if (i === 3) {\r\n            // 如果 pageNum 的左边第三位等于 1 时，就展示 1。\r\n            // 如果 pageNum 的左边第三位大于 1 时，则展示 •••。\r\n            if (pageNum - i > 1) {\r\n              stack.unshift({ counter: 'back', isActive: false });\r\n            } else {\r\n              stack.unshift({ counter: 1, isActive: false });\r\n            }\r\n          } else {\r\n            // 注意，pageNum 的左边第四位必须展示为 1。\r\n            stack.unshift({ counter: 1, isActive: false });\r\n          }\r\n        }\r\n\r\n        // 计算 pageNum 右边\r\n        // 当 pageNum + i 必须小于等于 maxPage，才会展示出来。否则不展示。\r\n        if (pageNum + i <= maxPage) {\r\n          if (i <= 2) {\r\n            // pageNum 右边前两位必须展示为数字。\r\n            stack.push({ counter: pageNum + i, isActive: false });\r\n          } else if (i === 3) {\r\n            // 如果 pageNum 的右边第三位小于 maxPage，则展示 •••。\r\n            // 如果 pageNum 的右边第三位等于 maxPage，则展示 maxPage。\r\n            if (pageNum + i < maxPage) {\r\n              stack.push({ counter: 'forward', isActive: false });\r\n            } else {\r\n              stack.push({ counter: maxPage, isActive: false });\r\n            }\r\n          } else {\r\n            // 注意，pageNum 的右边第四位必须展示为 maxPage。\r\n            stack.push({ counter: maxPage, isActive: false });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    setState(() => stack);\r\n  }, [total, pageSize, pageNum]);\r\n\r\n  const handleClickItem = (event: any) => {\r\n    const { target } = event;\r\n    let newCount = pageNum;\r\n    if (target.getAttribute('data-disabled') === 'true') return;\r\n\r\n    if (target.matches(`li.${styles.prev}`)) {\r\n      // 上一页\r\n      if (pageNum === 1) return;\r\n      onChange(pageNum - 1);\r\n    } else if (target.matches(`li.${styles.next}`)) {\r\n      // 下一页\r\n      if (pageNum === maxPageRef.current) return;\r\n      onChange(pageNum + 1);\r\n    } else if (target.matches(`li.${styles.dot}`)) {\r\n      const role = target.getAttribute('data-role');\r\n      if (role === 'forward') {\r\n        // 向前 5 页\r\n        newCount += 5;\r\n        newCount = newCount >= maxPageRef.current ? maxPageRef.current : newCount;\r\n      } else {\r\n        // 向后 5 页\r\n        newCount -= 5;\r\n        newCount = newCount <= 1 ? 1 : newCount;\r\n      }\r\n      onChange(newCount);\r\n    } else if (target.matches(`li.${styles.ait_pagination_item}`)) {\r\n      // 跳转到指定页\r\n      newCount = Number(target.getAttribute('data-index'));\r\n      onChange(newCount);\r\n    }\r\n  };\r\n\r\n  // 跳至指定额页面\r\n  const handleJump = (event: any) => {\r\n    // 是否点击回车按钮\r\n    if (event.keyCode !== 13) return;\r\n\r\n    let { value } = event.target;\r\n    if (/^-?\\d+$/.test(value)) {\r\n      if (value > maxPageRef.current) {\r\n        value = maxPageRef.current;\r\n      } else if (value < 1) {\r\n        value = 1;\r\n      }\r\n\r\n      onChange(Number(value));\r\n    }\r\n    event.target.value = '';\r\n  };\r\n\r\n  if (total <= 0) return null;\r\n  return (\r\n    <ul\r\n      className={classnames(styles.ait_pagination, {\r\n        [className]: !!className,\r\n      })}\r\n      onClick={handleClickItem}\r\n    >\r\n      <li\r\n        title=\"上一页\"\r\n        data-disabled={disabled ? 'true' : 'false'}\r\n        className={classnames(styles.ait_pagination_item, styles.prev, {\r\n          [styles.disabled]: pageNum === 1,\r\n        })}\r\n      >\r\n        &lt;\r\n      </li>\r\n      {state.map((item, index) => {\r\n        if (typeof item.counter === 'string') {\r\n          return (\r\n            <li\r\n              key={index}\r\n              data-disabled={disabled ? 'true' : 'false'}\r\n              className={classnames(styles.ait_pagination_item, styles.dot, {\r\n                [styles.active]: item.isActive,\r\n              })}\r\n              data-role={item.counter}\r\n              title={`向${item.counter === 'forward' ? '前' : '后'}5页`}\r\n            >\r\n              •••\r\n              <span>\r\n                <Icon name={item.counter === 'back' ? 'houtui' : 'qianjin'} className={styles.pagination_jump_icon} />\r\n              </span>\r\n            </li>\r\n          );\r\n        }\r\n        return (\r\n          <li\r\n            key={index}\r\n            data-index={item.counter}\r\n            data-disabled={disabled ? 'true' : 'false'}\r\n            className={classnames(styles.ait_pagination_item, {\r\n              [styles.active]: item.isActive,\r\n            })}\r\n          >\r\n            {item.counter}\r\n          </li>\r\n        );\r\n      })}\r\n      <li\r\n        title=\"下一页\"\r\n        data-disabled={disabled ? 'true' : 'false'}\r\n        className={classnames(styles.ait_pagination_item, styles.next, {\r\n          [styles.disabled]: pageNum === maxPageRef.current,\r\n        })}\r\n      >\r\n        &gt;\r\n      </li>\r\n      {jump ? (\r\n        <li data-disabled={disabled ? 'true' : 'false'} className={styles.ait_pagination_item_jump}>\r\n          跳至\r\n          <Input\r\n            type=\"text\"\r\n            className={styles.ait_pagination_item_jump_input}\r\n            disabled={disabled}\r\n            onKeyUp={handleJump}\r\n          />\r\n          页\r\n        </li>\r\n      ) : null}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default memo(Pagination);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"page\":\"src-pages-manage-record-index-module-page-qsDrS\",\"page_title\":\"src-pages-manage-record-index-module-page_title-7Cskc\",\"ellipsis\":\"src-pages-manage-record-index-module-ellipsis-xcKBj\",\"pagination\":\"src-pages-manage-record-index-module-pagination-ONwm4\"};","import React, { memo, useCallback, useLayoutEffect, useMemo } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators, Dispatch } from 'redux';\r\nimport Table from '@/components/Table';\r\nimport useReducer from '@/utils/useReducer';\r\nimport actions from '@/redux/actions/manage-record';\r\nimport Button from '@/components/Button';\r\nimport Pagination from '@/components/Pagination';\r\nimport Input from '@/components/Input';\r\nimport styles from './index.module.less';\r\nimport Modal from '@/components/Modal';\r\n\r\nconst mapStateFromProps = (state: any) => state.manageRecord;\r\nconst mapDispatchFromProps = (dispatch: Dispatch) => bindActionCreators(actions, dispatch);\r\nconst initialState = {\r\n  loading: true,\r\n  dataSource: [] as any[],\r\n  total: 0,\r\n  pageSize: 10,\r\n  pageNum: 1,\r\n  searchCondition: '',\r\n};\r\n\r\nfunction Record(props: any) {\r\n  const [state, setState] = useReducer(initialState);\r\n  const { loading, pageSize, pageNum, searchCondition, total, dataSource } = state;\r\n  const { querySyllabus } = props;\r\n\r\n  // 定义表格columns\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        dataIndex: 'course',\r\n        title: '搜索条件',\r\n        width: 150,\r\n      },\r\n      {\r\n        dataIndex: 'title',\r\n        title: '课程名称',\r\n        width: 150,\r\n      },\r\n      {\r\n        dataIndex: 'modules',\r\n        title: '所含模块',\r\n        width: 300,\r\n        render: (modules: any[]) => {\r\n          let value = '';\r\n          modules.forEach((item) => (value += `${item.title}+`));\r\n          return value.slice(0, -1);\r\n        },\r\n      },\r\n      {\r\n        dataIndex: 'introduce',\r\n        title: '内容介绍',\r\n        render: (introduce: string) => <div className={styles.ellipsis}>{introduce}</div>,\r\n      },\r\n      {\r\n        dataIndex: '_id',\r\n        title: '操作',\r\n        width: 200,\r\n        render: (id: string) => (\r\n          <div className={styles.operation}>\r\n            <Button type=\"link\" onClick={() => handleOperateInfo(id, 1)}>\r\n              编辑\r\n            </Button>\r\n            <Button type=\"link\" onClick={() => handleOperateInfo(id, 2)}>\r\n              查看\r\n            </Button>\r\n            <Button type=\"link\" onClick={() => handleDeleteInfo(id)}>\r\n              删除\r\n            </Button>\r\n          </div>\r\n        ),\r\n      },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const handleDeleteInfo = (id: string) => {\r\n    Modal.warn({\r\n      title: '删除数据',\r\n      content: '数据一旦删除成功就无法回复，确定删除吗？',\r\n      okText: '确定',\r\n      showCancel: true,\r\n      cancelText: '取消',\r\n      onOk: () => {\r\n        console.log(id);\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleOperateInfo = (id: string, type: number) => {\r\n    props.navigator(`/manage/permission?state=${type}&taskId=${id}`);\r\n  };\r\n\r\n  // 获取表格数据的方法\r\n  const queryDataSource = useCallback(\r\n    (size?: number, num?: number, condition?: string) => {\r\n      const pageNum = typeof num === 'undefined' ? state.pageNum : num;\r\n      const pageSize = typeof size === 'undefined' ? state.pageSize : size;\r\n      const course = typeof condition === 'undefined' ? state.searchCondition : condition;\r\n\r\n      setState({ loading: true });\r\n      querySyllabus({ pageNum, pageSize, course })\r\n        .then((response: any) => {\r\n          const { data, code } = response || {};\r\n          if (code === 0) {\r\n            const { list, pageNum, total } = data;\r\n            setState(() => ({ dataSource: list, total, pageNum }));\r\n          }\r\n        })\r\n        .catch((error: any) => console.log(error))\r\n        .finally(() => setState({ loading: false }));\r\n    },\r\n    [pageSize, pageNum, searchCondition],\r\n  );\r\n\r\n  // 分页器\r\n  const handlePaginationChange = useCallback(\r\n    (pageNum: number) => {\r\n      queryDataSource(pageSize, pageNum, searchCondition);\r\n    },\r\n    [pageSize, searchCondition],\r\n  );\r\n\r\n  const handleSearchConditionChange = useCallback((event: any) => {\r\n    setState({ searchCondition: event.target.value });\r\n  }, []);\r\n\r\n  // 按条件查询\r\n  const handleSearch = useCallback(() => {\r\n    queryDataSource(pageSize, 1, searchCondition);\r\n  }, [pageSize, searchCondition]);\r\n\r\n  // 页面初始化的时候，获取页面相关数据\r\n  useLayoutEffect(queryDataSource, []);\r\n\r\n  return (\r\n    <div className={styles.page}>\r\n      <h1 className={styles.page_title}>课程大纲</h1>\r\n      <div>\r\n        <Input.Search\r\n          placeholder=\"输入要查询的课程名称\"\r\n          value={searchCondition}\r\n          onChange={handleSearchConditionChange}\r\n          onSearch={handleSearch}\r\n          width={300}\r\n        />\r\n      </div>\r\n\r\n      <Table style={{ marginTop: 20 }} columns={columns} dataSource={dataSource} loading={loading} rowKey=\"_id\" />\r\n      <Pagination\r\n        pageSize={pageSize}\r\n        pageNum={pageNum}\r\n        total={total}\r\n        onChange={handlePaginationChange}\r\n        className={styles.pagination}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateFromProps, mapDispatchFromProps)(memo(Record));\r\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: INCORRECT_RESULT || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromiseConstructor = require('../internals/promise-native-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar defineBuiltIn = require('../internals/define-built-in');\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromiseConstructor && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromisePrototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromisePrototype['finally'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });\n  }\n}\n"],"names":["Pagination","props","pageSize","pageNum","total","onChange","disabled","className","jump","useState","state","setState","maxPageRef","useRef","Math","ceil","useLayoutEffect","maxPage","current","stack","i","push","isActive","counter","unshift","classnames","styles","onClick","event","target","newCount","getAttribute","matches","Number","title","item","index","key","Icon","name","Input","type","onKeyUp","keyCode","value","test","memo","initialState","loading","dataSource","searchCondition","Record","useReducer","querySyllabus","columns","useMemo","dataIndex","width","render","modules","forEach","introduce","id","Button","handleOperateInfo","handleDeleteInfo","Modal","content","okText","showCancel","cancelText","onOk","console","log","navigator","queryDataSource","useCallback","size","num","condition","course","then","response","data","code","list","catch","error","finally","handlePaginationChange","handleSearchConditionChange","handleSearch","placeholder","onSearch","Table","style","marginTop","rowKey","connect","manageRecord","dispatch","bindActionCreators","actions","tryToString","$TypeError","TypeError","module","exports","O","P","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","SILENT_ON_NON_WRITABLE_LENGTH","Object","defineProperty","writable","proto","arity","forced","this","len","argCount","arguments","length","k","to","j","IS_PURE","NativePromiseConstructor","fails","getBuiltIn","isCallable","speciesConstructor","promiseResolve","defineBuiltIn","NativePromisePrototype","prototype","real","call","onFinally","C","isFunction","x","e","method","unsafe"],"sourceRoot":""}